#ifndef FAULTPROP_H
#define FAULTPROP_H

/// @file FaultProp.h
/// @brief FaultProp のヘッダファイル
/// @author Yusuke Matsunaga (松永 裕介)
///
/// Copyright (C) 2017 Yusuke Matsunaga
/// All rights reserved.


#include "Fsim.h"
#include "fsim_nsdef.h"


BEGIN_NAMESPACE_YM_SATPG_FSIM

//////////////////////////////////////////////////////////////////////
/// @class FaultProp FaultProp.h "FaultProp.h"
/// @brief 故障の影響をFFRの根まで伝搬させるクラス
//////////////////////////////////////////////////////////////////////
class FaultProp
{
public:

  /// @brief デストラクタ
  virtual
  ~FaultProp() { }


public:
  //////////////////////////////////////////////////////////////////////
  // 外部インターフェイス
  //////////////////////////////////////////////////////////////////////

  /// @brief 故障の影響をFFRの根まで伝搬させる．
  /// @param[in] fault 対象の故障
  virtual
  PackedVal
  operator()(SimFault* fault) = 0;


private:
  //////////////////////////////////////////////////////////////////////
  // 内部で用いられる関数
  //////////////////////////////////////////////////////////////////////


private:
  //////////////////////////////////////////////////////////////////////
  // データメンバ
  //////////////////////////////////////////////////////////////////////

};


//////////////////////////////////////////////////////////////////////
/// @class SaFaultProp FaultProp.h "FaultProp.h"
/// @brief 縮退故障用の FaultProp
//////////////////////////////////////////////////////////////////////
class SaFaultProp :
  public FaultProp
{
public:

  /// @brief コンストラクタ
  /// @param[in] fsim 故障シミュレータ
  SaFaultProp(FSIM_CLASSNAME& fsim);

  /// @brief デストラクタ
  virtual
  ~SaFaultProp();


public:
  //////////////////////////////////////////////////////////////////////
  // 外部インターフェイス
  //////////////////////////////////////////////////////////////////////

  /// @brief 故障の影響をFFRの根まで伝搬させる．
  /// @param[in] fault 対象の故障
  virtual
  PackedVal
  operator()(SimFault* fault);


private:
  //////////////////////////////////////////////////////////////////////
  // 内部で用いられる関数
  //////////////////////////////////////////////////////////////////////


private:
  //////////////////////////////////////////////////////////////////////
  // データメンバ
  //////////////////////////////////////////////////////////////////////

  // 故障シミュレータ
  FSIM_CLASSNAME& mFsim;

};


//////////////////////////////////////////////////////////////////////
/// @class TdFaultProp FaultProp.h "FaultProp.h"
/// @brief 縮退故障用の FaultProp
//////////////////////////////////////////////////////////////////////
class TdFaultProp :
  public FaultProp
{
public:

  /// @brief コンストラクタ
  /// @param[in] fsim 故障シミュレータ
  TdFaultProp(FSIM_CLASSNAME& fsim);

  /// @brief デストラクタ
  virtual
  ~TdFaultProp();


public:
  //////////////////////////////////////////////////////////////////////
  // 外部インターフェイス
  //////////////////////////////////////////////////////////////////////

  /// @brief 故障の影響をFFRの根まで伝搬させる．
  /// @param[in] fault 対象の故障
  virtual
  PackedVal
  operator()(SimFault* fault);


private:
  //////////////////////////////////////////////////////////////////////
  // 内部で用いられる関数
  //////////////////////////////////////////////////////////////////////


private:
  //////////////////////////////////////////////////////////////////////
  // データメンバ
  //////////////////////////////////////////////////////////////////////

  // 故障シミュレータ
  FSIM_CLASSNAME& mFsim;

};

END_NAMESPACE_YM_SATPG_FSIM

#endif // FAULTPROP_H
